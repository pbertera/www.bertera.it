<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://www.bertera.it/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="http://www.bertera.it/theme/pygments/default.min.css">
  <link rel="stylesheet" type="text/css" href="http://www.bertera.it/theme/font-awesome/css/font-awesome.min.css">


    <link href="http://www.bertera.it/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Pietro Bertera's Blog Atom">



  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#ff3333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#ff3333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<meta name="author" content="admin" />
<meta name="description" content="Starting from Asterisk 1.8 you can send multicast rtp streams using the MulticastRTP channel driver. There is an open issue that breaks outgoing RTP if the source channel doesn't contains timing informations (Eg. playing an audio file with Dial(MulticastRTP/basic/239.255.255.245:5555,,A(my-announce))). All …" />
<meta name="keywords" content="asterisk, c, multicast, patch, rtp, VoIP">
<meta property="og:site_name" content="Pietro Bertera's Blog"/>
<meta property="og:title" content="RTP timestamps fix in Asterisk MulticastRTP channels"/>
<meta property="og:description" content="Starting from Asterisk 1.8 you can send multicast rtp streams using the MulticastRTP channel driver. There is an open issue that breaks outgoing RTP if the source channel doesn't contains timing informations (Eg. playing an audio file with Dial(MulticastRTP/basic/239.255.255.245:5555,,A(my-announce))). All …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://www.bertera.it/rtp-timestamps-fix-in-asterisk-multicastrtp-channels.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2012-12-12 19:09:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://www.bertera.it/author/admin.html">
<meta property="article:section" content="VoIP"/>
<meta property="article:tag" content="asterisk"/>
<meta property="article:tag" content="c"/>
<meta property="article:tag" content="multicast"/>
<meta property="article:tag" content="patch"/>
<meta property="article:tag" content="rtp"/>
<meta property="article:tag" content="VoIP"/>
<meta property="og:image" content="//s.gravatar.com/avatar/f64fc3d41c2a8368feff0b7672ca7571?s=120">
  <title>Pietro Bertera's Blog &ndash; RTP timestamps fix in Asterisk MulticastRTP channels</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://www.bertera.it">
        <img src="//s.gravatar.com/avatar/f64fc3d41c2a8368feff0b7672ca7571?s=120" alt="Pietro Bertera" title="Pietro Bertera">
      </a>
      <h1><a href="http://www.bertera.it">Pietro Bertera</a></h1>
<p>Something about ...</p>      <nav>
        <ul class="list">
          <li><a href="http://www.bertera.it/pages/about.html#about">About</a></li>
          <li><a href="http://www.bertera.it/pages/contact.html#contact">Contact</a></li>
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/pietrobertera" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/pbertera" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-twitter" href="https://twitter.com/pbertera" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-rss" href="//bertera.it/feeds/all.atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="http://www.bertera.it">Home</a>
      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
      <a href="http://www.bertera.it/feeds/all.atom.xml">Atom</a>
    </nav>

<article>
  <header>
    <h1 id="rtp-timestamps-fix-in-asterisk-multicastrtp-channels">RTP timestamps fix in Asterisk MulticastRTP channels</h1>
    <p>Posted on Wed 12 December 2012 in <a href="http://www.bertera.it/category/voip.html">VoIP</a></p>
  </header>
  <div>
    <p>Starting from Asterisk 1.8 you can <a href="http://www.voip-info.org/wiki/view/Asterisk+MulticastRTP+channels">send multicast rtp
streams</a>
using the MulticastRTP channel driver. There is an <a href="https://issues.asterisk.org/jira/browse/ASTERISK-19883">open
issue</a> that
breaks outgoing RTP if the source channel doesn't contains timing
informations (Eg. playing an audio file with
<strong>Dial(MulticastRTP/basic/239.255.255.245:5555,,A(my-announce))</strong>).<br>
All outgoing RTP frames a timestamp value of 0.</p>
<p>This <a href="http://www.bertera.it/asterisk_trunk-377802-rtp-multicast-timestamp.patch">patch</a> adds timing information in outgoing RTP stream.</p>
<p>Following an example usage in dialplan:  </p>
<div class="highlight"><pre><span></span><code><span class="n">exten</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">999</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">Answer</span><span class="p">()</span><span class="w">  </span>
<span class="n">exten</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">999</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">Dial</span><span class="p">(</span><span class="n">MulticastRTP</span><span class="o">/</span><span class="n">basic</span><span class="o">/</span><span class="mf">239.255</span><span class="o">.</span><span class="mf">255.245</span><span class="p">:</span><span class="mi">5555</span><span class="p">,,</span><span class="n">A</span><span class="p">(</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">asterisk</span><span class="o">/</span><span class="n">moh</span><span class="o">/</span><span class="n">mymoh</span><span class="p">))</span>
</code></pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://www.bertera.it/tag/asterisk.html">asterisk</a>
      <a href="http://www.bertera.it/tag/c.html">c</a>
      <a href="http://www.bertera.it/tag/multicast.html">multicast</a>
      <a href="http://www.bertera.it/tag/patch.html">patch</a>
      <a href="http://www.bertera.it/tag/rtp.html">rtp</a>
      <a href="http://www.bertera.it/tag/voip.html">VoIP</a>
    </p>
  </div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'bertera-it';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</article>

    <footer>
<p>
  &copy; Pietro Bertera 2016 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Pietro Bertera's Blog ",
  "url" : "http://www.bertera.it",
  "image": "//s.gravatar.com/avatar/f64fc3d41c2a8368feff0b7672ca7571?s=120",
  "description": "Pietro Bertera's Thoughts and Writings"
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "name": "RTP timestamps fix in Asterisk MulticastRTP channels",
  "headline": "RTP timestamps fix in Asterisk MulticastRTP channels",
  "datePublished": "2012-12-12 19:09:00+01:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "admin",
    "url": "http://www.bertera.it/author/admin.html"
  },
  "image": "//s.gravatar.com/avatar/f64fc3d41c2a8368feff0b7672ca7571?s=120",
  "url": "http://www.bertera.it/rtp-timestamps-fix-in-asterisk-multicastrtp-channels.html",
  "description": "Starting from Asterisk 1.8 you can send multicast rtp streams using the MulticastRTP channel driver. There is an open issue that breaks outgoing RTP if the source channel doesn't contains timing informations (Eg. playing an audio file with Dial(MulticastRTP/basic/239.255.255.245:5555,,A(my-announce))). All …"
}
</script></body>
</html>